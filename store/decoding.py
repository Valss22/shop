import base64
import json

def parse_id_token(token: str) -> dict:
    parts = token.split(".")
    if len(parts) != 3:
        raise Exception("Incorrect id token format")

    payload = parts[1]
    padded = payload + '=' * (4 - len(payload) % 4)
    decoded = base64.b64decode(padded)
    return json.loads(decoded)


#a = 'eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlZDgwZmVjNTZkYjk5MjMzZDRiNGY2MGZiYWZkYmFlYjkxODZjNzMiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXpwIjoiMjk4OTc4OTgyMzItNzI3ZHN2ZWJxc2ZhN2txcmRkbDBoaGJiZmFsZzB2anAuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiIyOTg5Nzg5ODIzMi03Mjdkc3ZlYnFzZmE3a3FyZGRsMGhoYmJmYWxnMHZqcC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjEwMjI2ODM3MTUxOTkwMjM4MzU3NSIsImVtYWlsIjoiZGVnZXIuYmVnZXJyckBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXRfaGFzaCI6IlJ2WHRKYThOeDZPN2JWRzNpRWFGRVEiLCJuYW1lIjoi0JTQtdCz0LXRgCDQkdC10LPQtdGAIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS8tX3E5bEFVbnotZE0vQUFBQUFBQUFBQUkvQUFBQUFBQUFBQUEvQU1adXVjbnRjdDFCMG9JTHBVTWZ0T3lUa1NJRFBremU2US9zOTYtYy9waG90by5qcGciLCJnaXZlbl9uYW1lIjoi0JTQtdCz0LXRgCIsImZhbWlseV9uYW1lIjoi0JHQtdCz0LXRgCIsImxvY2FsZSI6ImVuIiwiaWF0IjoxNjEzOTIyMjQ0LCJleHAiOjE2MTM5MjU4NDQsImp0aSI6IjhjODYyODI3NGQ4YWNlMThhOTViNmNmYjk3Mzg4NTA2MGQwN2ZkYWYifQ.gDZmRVvDjdyqIuRYK1uGN-1onXqEGp4s44CGiiFUyM44QPud0ayxEvhrdceMn3uFU1NFhKA5mELyeME7A1k5bi4Unm5zD8_5QR81d-ijmvAjM0PzeYc0GGG7loScDJH6gesAFfqg2DSkstVBIiEofDvOobZWtu_2IU2VBiVszXMWwOgJmBoNMBjKLsRYuRf4iKWVAnMvcUfuQb2HXL6KDj2VCTk1G45Dj9NT-5eU_EVh7aCQPVhBpXVddU0cO-WLkS4mnjyJl_pbXRfRtm1mOVCSKXCOk74M_eVrHPWNSNtOqnVVmUvQGcZ98VxJjpWRoGss3XVkgf0r-jS_vrRi_A'
b = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTYxNDAwODg3MSwianRpIjoiMjI1OTY5OTg4YTZkNDQ5MTgwZjI2NDY1MDA1ZTBlOGUiLCJ1c2VyX2lkIjo3fQ.g4cd2FhH0tvvjcxGkfjmhAfiQIWdZgd_sIJyVnIt4mY'

print(parse_id_token(b))




